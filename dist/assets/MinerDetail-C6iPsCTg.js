import{c as d,Q as k,R as T,E as M,r as b,j as e,A,b as p,V as B,I as S,Z as y,e as N,J as L,D as E}from"./index-Cb_Vey4A.js";import{u as P}from"./useAPI-D50lHb9i.js";import{A as R}from"./activity-XNIBoXMN.js";import{C as H}from"./calendar-DfOGD8DU.js";const $=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const z=d("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);const v=d("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function J(){const{id:x}=k(),f=T(),{user:I}=M(),{data:l,isLoading:u}=P(x),[i,w]=b.useState(l?.miner?.reinvest_percentage||0),[n,_]=b.useState(0);if(u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-400",children:"Loading miner details..."})});if(!l?.miner)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx(A,{className:"w-16 h-16 text-gray-600 mb-4"}),e.jsx("div",{className:"text-xl text-gray-400 mb-2",children:"Miner not found"}),e.jsx(p,{to:"/app/miners",className:"text-amber-400 hover:text-amber-300",children:"Back to miners list"})]});const{miner:t,rewards:C,invoices:c}=l,r=C.slice(0,7),m=r.reduce((s,a)=>s+parseFloat(a.net_btc),0),o=m/Math.max(1,r.length);c.reduce((s,a)=>s+parseFloat(a.final_amount_usd),0);const h=t.hashrate_th*t.efficiency_w_per_th*24*.08/1e3,g=t.hashrate_th*.02,D=h+g;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>f("/app/miners"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx($,{size:20}),"Back to Miners"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{to:`/app/miners/${x}/upgrade`,className:"px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg font-semibold hover:bg-amber-500/30 transition-all flex items-center gap-2",children:[e.jsx(z,{size:18}),"Upgrade"]}),e.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(v,{size:20})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-8 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Miner #",t.id.slice(0,8)]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${t.status==="active"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.status}),t.farm_id&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-400",children:[e.jsx(B,{size:14}),e.jsxs("span",{children:["Data Center #",t.farm_id.slice(0,6)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Earned"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[t.total_rewards_btc.toFixed(8)," BTC"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"w-5 h-5 text-amber-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Hashrate"})]}),e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:t.hashrate_th}),e.jsx("div",{className:"text-xs text-gray-500",children:"TH/s"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Efficiency"})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.efficiency_w_per_th}),e.jsx("div",{className:"text-xs text-gray-500",children:"W/TH"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"w-5 h-5 text-purple-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Power Level"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:t.power_level}),e.jsx("div",{className:"text-xs text-gray-500",children:"Level"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{className:"w-5 h-5 text-green-400"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Avg Daily"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:o.toFixed(8)}),e.jsx("div",{className:"text-xs text-gray-500",children:"BTC"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(L,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{className:"text-xl font-bold",children:"Rewards History (7 Days)"})]}),r.length>0?e.jsxs("div",{className:"space-y-3",children:[r.map(s=>{const a=parseFloat(s.gross_btc),j=parseFloat(s.net_btc),F=(j/a*100).toFixed(1);return e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-all border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(s.reward_date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["+",j.toFixed(8)," BTC"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Gross:"}),e.jsx("span",{className:"ml-1 text-gray-300",children:a.toFixed(8)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Maint:"}),e.jsx("span",{className:"ml-1 text-gray-300",children:parseFloat(s.maintenance_cost_btc).toFixed(8)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Efficiency:"}),e.jsxs("span",{className:"ml-1 text-amber-400",children:[F,"%"]})]})]})]},s.id)}),e.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"7-Day Total"}),e.jsxs("span",{className:"font-bold text-green-400",children:[m.toFixed(8)," BTC"]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Average"}),e.jsxs("span",{className:"font-bold text-amber-400",children:[o.toFixed(8)," BTC"]})]})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No rewards yet"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(E,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{className:"text-xl font-bold",children:"Maintenance Breakdown"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Daily Cost Estimate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-300 flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),"Electricity"]}),e.jsxs("span",{className:"font-semibold text-white",children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Service Fee"}),e.jsxs("span",{className:"font-semibold text-white",children:["$",g.toFixed(2)]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-700 flex justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-200",children:"Total Daily"}),e.jsxs("span",{className:"font-bold text-amber-400",children:["$",D.toFixed(2)]})]})]})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Recent Invoices"}),e.jsx("div",{className:"space-y-2",children:c.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:new Date(s.invoice_date).toLocaleDateString()}),e.jsx("div",{className:`text-xs ${s.status==="paid"?"text-green-400":"text-yellow-400"}`,children:s.status})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:["$",parseFloat(s.final_amount_usd).toFixed(2)]}),s.discount_applied_pct>0&&e.jsxs("div",{className:"text-xs text-amber-400",children:["-",s.discount_applied_pct,"% discount"]})]})]},s.id))})]}),e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-amber-400 font-semibold mb-2",children:"ðŸ’¡ Maintenance Tip"}),e.jsx("div",{className:"text-sm text-gray-300",children:"Pay with TYT tokens for up to 18% discount! Higher VIP levels get even better rates."})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(v,{className:"w-5 h-5 text-amber-400"}),e.jsx("h2",{className:"text-xl font-bold",children:"Miner Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Auto-Reinvest: ",e.jsxs("span",{className:"text-amber-400",children:[i,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:i,onChange:s=>w(Number(s.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-amber-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"100%"})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Automatically reinvest ",i,"% of rewards to upgrade this miner"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Foundation Donation: ",e.jsxs("span",{className:"text-neon-cyan",children:[n,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:n,onChange:s=>_(Number(s.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-neon-cyan"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"10%"})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Donate ",n,"% of rewards to Brain Cancer Children's Foundation"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{className:"px-6 py-2 bg-amber-500 text-black rounded-lg font-semibold hover:bg-amber-400 transition-all",children:"Save Settings"})})]})]})}export{J as default};

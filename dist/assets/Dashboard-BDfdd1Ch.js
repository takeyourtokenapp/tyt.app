import{c as te,z as w,E as W,r as d,j as e,I as _,b as y,J as ae,s as K,e as F,Z as R,K as J,D as Z,N as re,q as ie,G as le,t as V,W as Y,o as ne,A as ce,h as G,d as A,f as de,U as oe}from"./index-Cb_Vey4A.js";import{R as I}from"./refresh-cw-DbeEGu-Y.js";import{A as L}from"./activity-XNIBoXMN.js";import{C as me}from"./clock-ClFQAG9n.js";import{C as E}from"./calendar-DfOGD8DU.js";import{A as xe}from"./arrow-up-right-D1jRNhcf.js";import{E as ge}from"./external-link-Dv1yQxy7.js";const he=te("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);async function be(r){const{data:s,error:i}=await w.from("nft_miners").select("*").eq("owner_id",r).order("created_at",{ascending:!1});if(i)throw i;return s||[]}function fe(r,s,i,l=6e8,x=3.125,h=144,c=.05){const a=h*x,v=r/l,n=a*v,f=n*i,j=r*s*24/1e3*c,m=f*.15,p=f-j-m,u=p/i;return{grossBtc:n,grossUsd:f,electricityCostUsd:j,estimatedNetBtc:Math.max(0,u),estimatedNetUsd:Math.max(0,p)}}const O=1e5,je=7e11;function ue(){const{user:r}=W(),[s,i]=d.useState(null),[l,x]=d.useState(!0);d.useEffect(()=>{r?.id&&h()},[r?.id]);async function h(){if(r?.id)try{x(!0);const c=await be(r.id),a=c.filter(o=>o.status==="active"),v=a.reduce((o,j)=>o+j.powerTh,0),n=a.length>0?a.reduce((o,j)=>o+j.efficiencyWTh,0)/a.length:0;let f=0;for(const o of a){const j=fe(o.powerTh,o.efficiencyWTh,O,je);f+=j.netBtc}const g=a.length>0?a.reduce((o,j)=>j.powerTh>(o?.powerTh||0)?j:o,a[0]):null;i({totalHashrate:v,averageEfficiency:n,estimatedDailyBtc:f,estimatedDailyUsd:f*O,activeMiners:a.length,totalMiners:c.length,topMiner:g,performanceChange:2.4})}catch(c){console.error("Failed to load miner performance:",c)}finally{x(!1)}}return l?e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(I,{className:"w-6 h-6 text-amber-400 animate-spin"})})}):!s||s.totalMiners===0?e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h3",{className:"font-semibold",children:"Miner Performance"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-center mb-4",children:"No miners found"}),e.jsx(y,{to:"/app/marketplace",className:"px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg text-sm font-semibold hover:bg-amber-500/30 transition-all",children:"Browse Marketplace"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Miner Performance"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Real-time mining statistics"})]})]}),e.jsxs(y,{to:"/app/miners",className:"text-sm text-amber-400 hover:text-amber-300 flex items-center gap-1",children:["Details ",e.jsx(K,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx(P,{icon:_,label:"Total Hashrate",value:`${s.totalHashrate.toFixed(2)} TH/s`,trend:s.performanceChange}),e.jsx(P,{icon:he,label:"Avg Efficiency",value:`${s.averageEfficiency.toFixed(1)} W/TH`,color:"blue"}),e.jsx(P,{icon:F,label:"Est. Daily",value:`${s.estimatedDailyBtc.toFixed(8)} BTC`,subValue:`$${s.estimatedDailyUsd.toFixed(2)}`,color:"green"}),e.jsx(P,{icon:L,label:"Active Miners",value:`${s.activeMiners}/${s.totalMiners}`,color:"cyan"})]}),s.topMiner&&e.jsx("div",{className:"bg-gradient-to-r from-amber-500/10 to-orange-500/10 rounded-lg border border-amber-500/20 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Top Performer"}),e.jsx("div",{className:"font-semibold",children:s.topMiner.model||`Miner #${s.topMiner.id.slice(0,6)}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-amber-400",children:[s.topMiner.powerTh," TH/s"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[s.topMiner.efficiencyWTh," W/TH"]})]})]})})]})}function P({icon:r,label:s,value:i,subValue:l,trend:x,color:h="amber"}){const c={amber:"text-amber-400",blue:"text-blue-400",green:"text-green-400",cyan:"text-cyan-400"};return e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(r,{className:`w-4 h-4 ${c[h]}`}),x!==void 0&&e.jsxs("span",{className:`text-xs flex items-center gap-0.5 ${x>=0?"text-green-400":"text-red-400"}`,children:[x>=0?e.jsx(F,{className:"w-3 h-3"}):e.jsx(J,{className:"w-3 h-3"}),Math.abs(x),"%"]})]}),e.jsx("div",{className:`font-bold ${c[h]}`,children:i}),l&&e.jsx("div",{className:"text-xs text-gray-500",children:l}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s})]})}const pe=1e5;function ve(){const{user:r}=W(),[s,i]=d.useState(null),[l,x]=d.useState([]),[h,c]=d.useState(!0),[a,v]=d.useState("btc");d.useEffect(()=>{r?.id&&n()},[r?.id]);async function n(){if(r?.id)try{c(!0);const m=await getProjectedEarnings(r.id,30);x(m);const p=m.reduce((u,C)=>u+C.netBtc,0);i({today:m[0]?.netBtc||0,thisWeek:m.slice(0,7).reduce((u,C)=>u+C.netBtc,0),thisMonth:p,allTime:p*3,projected30Days:p,lastClaimDate:new Date().toISOString(),claimableNow:0,rewardHistory:m.slice(0,7).map(u=>({date:u.date,amount:u.netBtc}))})}catch(m){console.error("Failed to load rewards summary:",m)}finally{c(!1)}}function f(m){return m.toFixed(8)}function g(m){return(m*pe).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function o(m){return a==="btc"?`${f(m)} BTC`:`$${g(m)}`}if(h)return e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(I,{className:"w-6 h-6 text-green-400 animate-spin"})})});if(!s)return e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-green-400"})}),e.jsx("h3",{className:"font-semibold",children:"Rewards Summary"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[e.jsx(re,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-center",children:"No rewards data yet"})]})]});const j=Math.max(...s.rewardHistory.map(m=>m.amount),1e-8);return e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Rewards Summary"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Mining earnings overview"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v("btc"),className:`px-2 py-1 text-xs rounded ${a==="btc"?"bg-amber-500/20 text-amber-400":"text-gray-400 hover:text-white"}`,children:"BTC"}),e.jsx("button",{onClick:()=>v("usd"),className:`px-2 py-1 text-xs rounded ${a==="usd"?"bg-green-500/20 text-green-400":"text-gray-400 hover:text-white"}`,children:"USD"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(me,{className:"w-3 h-3"}),"Today"]}),e.jsx("div",{className:"font-bold text-green-400",children:o(s.today)})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(E,{className:"w-3 h-3"}),"This Week"]}),e.jsx("div",{className:"font-bold",children:o(s.thisWeek)})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(E,{className:"w-3 h-3"}),"This Month"]}),e.jsx("div",{className:"font-bold",children:o(s.thisMonth)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-lg border border-amber-500/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[e.jsx(ie,{className:"w-3 h-3"}),"All Time"]}),e.jsx("div",{className:"font-bold text-amber-400",children:o(s.allTime)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsx("span",{className:"text-gray-400",children:"7-Day Trend"}),e.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),"Stable"]})]}),e.jsx("div",{className:"flex items-end gap-1 h-16",children:s.rewardHistory.map((m,p)=>{const u=m.amount/j*100;return e.jsx("div",{className:"flex-1 bg-gradient-to-t from-green-500/40 to-green-400/60 rounded-t transition-all hover:from-green-500/60 hover:to-green-400/80",style:{height:`${Math.max(u,10)}%`},title:`${m.date}: ${f(m.amount)} BTC`},p)})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"7d ago"}),e.jsx("span",{children:"Today"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-lg border border-green-500/20 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"30-Day Projection"}),e.jsx("div",{className:"text-xl font-bold text-green-400",children:o(s.projected30Days)})]}),e.jsxs(y,{to:"/app/rewards",className:"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium hover:bg-green-500/30 transition-all flex items-center gap-1",children:["View Details",e.jsx(K,{className:"w-4 h-4"})]})]})})]})}class ye{priceCache=null;networkCache=null;CACHE_DURATION=6e4;async getBitcoinPrice(){if(this.priceCache&&Date.now()-this.priceCache.timestamp<this.CACHE_DURATION)return this.priceCache;try{const s=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd,eur&include_last_updated_at=true");if(!s.ok)throw new Error(`CoinGecko API error: ${s.status}`);const i=await s.json();return this.priceCache={usd:i.bitcoin.usd,eur:i.bitcoin.eur,timestamp:Date.now(),source:"coingecko"},this.priceCache}catch(s){return console.error("Error fetching Bitcoin price:",s),this.priceCache?(console.warn("Using stale price data"),this.priceCache):{usd:43500,eur:4e4,timestamp:Date.now(),source:"fallback"}}}async getNetworkStats(){if(this.networkCache&&Date.now()-this.networkCache.timestamp<this.CACHE_DURATION*5)return this.networkCache;try{const i=await(await fetch("https://blockchain.info/q/getdifficulty")).json(),x=await(await fetch("https://blockchain.info/q/hashrate")).json(),c=await(await fetch("https://blockchain.info/q/getblockcount")).json(),a=Date.now()>new Date("2024-04-20").getTime()?3.125:6.25;return this.networkCache={difficulty:i,hashrate:x/1e18,blockHeight:c,blockReward:a,timestamp:Date.now()},this.networkCache}catch(s){return console.error("Error fetching network stats:",s),this.networkCache?this.networkCache:{difficulty:73197634206448,hashrate:550,blockHeight:82e4,blockReward:3.125,timestamp:Date.now()}}}async calculateMiningProfit(s,i=25,l=.06,x=0,h=.15,c=0){const[a,v]=await Promise.all([this.getBitcoinPrice(),this.getNetworkStats()]),n=v.hashrate*1e6,g=s/n*144*v.blockReward,j=s*i/1e3*24*l,p=g*a.usd*h,u=x*(1-c),$=(j+u+p)/a.usd,D=g-$,S=D*a.usd,H=D*30,M=S*30,U=D*365,T=S*365,B=s*150,t=S>0?B/S:1/0,b=M/B*100,N=T/B*100;return{dailyBTC:D,dailyUSD:S,monthlyBTC:H,monthlyUSD:M,yearlyBTC:U,yearlyUSD:T,breakEvenDays:t,roi30Days:b,roi365Days:N}}async getSimplifiedEstimate(s){const[i,l]=await Promise.all([this.getBitcoinPrice(),this.getNetworkStats()]),x=await this.calculateMiningProfit(s);return{price:i,network:l,estimate:x}}formatCurrency(s,i="USD"){return i==="BTC"?`₿${s.toFixed(8)}`:i==="USD"?`$${s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`€${s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}clearCache(){this.priceCache=null,this.networkCache=null}}const z=new ye;function Ne(r=!0,s=6e4){const[i,l]=d.useState(null),[x,h]=d.useState(null),[c,a]=d.useState(!0),[v,n]=d.useState(null),f=async()=>{try{a(!0),n(null);const[g,o]=await Promise.all([z.getBitcoinPrice(),z.getNetworkStats()]);l(g),h(o)}catch(g){n(g instanceof Error?g.message:"Failed to fetch Bitcoin data"),console.error("Error fetching Bitcoin data:",g)}finally{a(!1)}};return d.useEffect(()=>{if(f(),r){const g=setInterval(f,s);return()=>clearInterval(g)}},[r,s]),{price:i,network:x,loading:c,error:v,refresh:f}}function we(){const{price:r}=Ne(),[s,i]=d.useState(null),[l,x]=d.useState(!0);d.useEffect(()=>{h();const c=setInterval(h,6e4);return()=>clearInterval(c)},[]),d.useEffect(()=>{r&&i(c=>c?{...c,btcPrice:r}:null)},[r]);async function h(){try{i({btcPrice:r||1e5,btcChange24h:2.34,networkHashrate:700,networkDifficulty:92.67,blockHeight:872453,mempoolSize:156,avgBlockTime:9.8,halving:{nextDate:"2028-04-15",blocksRemaining:157547}})}catch(c){console.error("Failed to load network stats:",c)}finally{x(!1)}}return l?e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(I,{className:"w-6 h-6 text-amber-400 animate-spin"})})}):s?e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-amber-400"}),e.jsx("h3",{className:"font-semibold",children:"Bitcoin Network"})]}),e.jsxs("a",{href:"https://mempool.space",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-400 hover:text-amber-400 flex items-center gap-1",children:["Live Data ",e.jsx(ge,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-lg border border-amber-500/20 p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"BTC Price"}),e.jsxs("div",{className:"text-lg font-bold text-amber-400",children:["$",s.btcPrice.toLocaleString()]}),e.jsxs("div",{className:`text-xs flex items-center gap-1 ${s.btcChange24h>=0?"text-green-400":"text-red-400"}`,children:[s.btcChange24h>=0?e.jsx(F,{className:"w-3 h-3"}):e.jsx(J,{className:"w-3 h-3"}),Math.abs(s.btcChange24h),"%"]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Network Hashrate"}),e.jsxs("div",{className:"text-lg font-bold",children:[s.networkHashrate," EH/s"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Global Mining Power"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Difficulty"}),e.jsxs("div",{className:"text-lg font-bold",children:[s.networkDifficulty,"T"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Current Epoch"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Block Height"}),e.jsxs("div",{className:"text-lg font-bold",children:["#",s.blockHeight.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["~",s.avgBlockTime,"min avg"]})]})]}),e.jsx("div",{className:"mt-4 bg-gradient-to-r from-amber-500/5 to-orange-500/5 rounded-lg border border-amber-500/10 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-sm",children:"Next Halving"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-amber-400",children:[s.halving.blocksRemaining.toLocaleString()," blocks"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["~",s.halving.nextDate]})]})]})})]}):null}function Fe(){const{user:r}=W(),[s,i]=d.useState([]),[l,x]=d.useState([]),[h,c]=d.useState([]),[a,v]=d.useState(null),[n,f]=d.useState(null),[g,o]=d.useState(0),[j,m]=d.useState(!0),[p,u]=d.useState(!1);d.useEffect(()=>{r&&C()},[r]);const C=async()=>{if(r)try{const[t,b,N,k]=await Promise.all([w.from("custodial_wallets").select("*").eq("user_id",r.id),w.from("nft_miners").select("*").eq("owner_id",r.id).eq("status","active"),w.from("daily_rewards").select("*").eq("user_id",r.id).order("reward_date",{ascending:!1}).limit(7),w.from("profiles").select("*").eq("id",r.id).maybeSingle()]);if(t.data&&i(t.data),b.data&&x(b.data),N.data&&c(N.data),k.data){v(k.data);const q=await w.from("vip_tiers").select("*").eq("level",k.data.vip_level).maybeSingle();if(q.data&&f(q.data),k.data.service_button_last_pressed){const Q=new Date(k.data.service_button_last_pressed).getTime(),X=1440*60*1e3,ee=Date.now()-Q,se=Math.max(0,X-ee);o(se)}}}catch(t){console.error("Error loading dashboard:",t)}finally{m(!1)}};d.useEffect(()=>{if(g>0){const t=setInterval(()=>{o(b=>Math.max(0,b-1e3))},1e3);return()=>clearInterval(t)}},[g]);const $=async()=>{if(!(!r||!a||g>0||p)){u(!0);try{const t=n?parseFloat(n.service_button_reward):10;await w.from("profiles").update({service_button_last_pressed:new Date().toISOString(),service_button_presses:(a.service_button_presses||0)+1}).eq("id",r.id);const b=s.find(N=>N.currency==="TYT");if(b){const N=parseFloat(b.balance)+t;await w.from("custodial_wallets").update({balance:N.toString()}).eq("id",b.id)}o(1440*60*1e3),await C()}catch(t){console.error("Error pressing service button:",t)}finally{u(!1)}}},D=t=>{const b=Math.floor(t/36e5),N=Math.floor(t%(1e3*60*60)/(1e3*60)),k=Math.floor(t%(1e3*60)/1e3);return`${b}h ${N}m ${k}s`},S=l.reduce((t,b)=>t+parseFloat(b.hashrate),0),H=l.length>0?l.reduce((t,b)=>t+parseFloat(b.efficiency),0)/l.length:0,M=h[0],U=h.reduce((t,b)=>t+parseFloat(b.btc_amount),0),T=n&&a&&n.level<10?n.level+1:null,B=a&&n&&T?(a.total_spent-parseFloat(n.min_spent))/(parseFloat(n.max_spent)-parseFloat(n.min_spent))*100:0;return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-3 border-amber-400 border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"text-gray-400 text-lg",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-amber-400 to-amber-600 bg-clip-text text-transparent",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",e.jsx("span",{className:"text-white font-semibold",children:r?.email?.split("@")[0]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:a&&n&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500/20 to-orange-500/20 rounded-lg border border-amber-500/30",children:[e.jsx(V,{className:"w-5 h-5 text-amber-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"VIP Level"}),e.jsx("div",{className:"font-bold text-amber-400",children:n.level})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"BTC Balance"}),e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(Y,{className:"w-5 h-5 text-amber-400"})})]}),e.jsx("div",{className:"text-2xl font-bold text-amber-400 mb-1",children:s.find(t=>t.asset==="BTC")?.balance||"0.00000000"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["≈ $",(parseFloat(s.find(t=>t.asset==="BTC")?.balance||"0")*95e3).toFixed(2)," USD"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"TYT Balance"}),e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(ne,{className:"w-5 h-5 text-amber-400"})})]}),e.jsx("div",{className:"text-2xl font-bold text-amber-400 mb-1",children:parseFloat(s.find(t=>t.asset==="TYT")?.balance||"0").toFixed(0)}),e.jsx("div",{className:"text-xs text-gray-500",children:"For maintenance discounts"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"Total Hashrate"}),e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-amber-400"})})]}),e.jsx("div",{className:"text-2xl font-bold text-amber-400 mb-1",children:S.toFixed(2)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.length," active miner",l.length!==1?"s":""]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"Daily Reward"}),e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-green-400"})})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400 mb-1",children:M?parseFloat(M.net_btc).toFixed(8):"0.00000000"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Weekly: ",U.toFixed(8)," BTC"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"Efficiency"}),e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(L,{className:"w-5 h-5 text-blue-400"})})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:H.toFixed(1)}),e.jsx("div",{className:"text-xs text-gray-500",children:"W/TH avg efficiency"})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-xl p-6 border border-amber-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-amber-500/20 rounded-xl",children:e.jsx(R,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Service Button"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Press daily to earn ",n?parseFloat(n.service_button_reward):10," TYT"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Total Presses"}),e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:a.service_button_presses||0})]})]}),e.jsx("button",{onClick:$,disabled:g>0||p,className:`w-full py-6 rounded-xl font-bold text-lg transition-all ${g>0?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-orange-500 hover:shadow-xl hover:shadow-amber-500/50 hover:scale-[1.02] active:scale-[0.98] text-white"}`,children:p?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):g>0?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Available in ",D(g)]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(R,{className:"w-6 h-6"}),"Press Now to Earn TYT"]})})]}),n&&T&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-amber-500/20 rounded-xl",children:e.jsx(V,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"VIP Progress"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Level ",n.level," → ",T]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Progress"}),e.jsxs("span",{className:"font-bold text-amber-400",children:[Math.min(100,B).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-500",style:{width:`${Math.min(100,B)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Current Benefits"}),e.jsxs("div",{className:"text-sm font-semibold text-amber-400",children:[parseFloat(n.maintenance_discount).toFixed(0),"% Discount"]})]}),e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Spent"}),e.jsxs("div",{className:"text-sm font-semibold text-white",children:["$",parseFloat(a.total_spent).toFixed(2)]})]})]}),e.jsx(y,{to:"/app/settings",className:"block text-center py-2 bg-amber-500/20 text-amber-400 rounded-lg text-sm font-semibold hover:bg-amber-500/30 transition-all",children:"View All Benefits"})]})]})]}),l.length===0&&e.jsx("div",{className:"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/50 rounded-xl p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-amber-500/20 rounded-2xl",children:e.jsx(ce,{className:"w-8 h-8 text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-amber-400 mb-2",children:"Start Your Mining Journey"}),e.jsx("p",{className:"text-gray-300 mb-4 max-w-2xl",children:"You don't have any active miners yet. Purchase your first NFT miner from the marketplace to start earning daily BTC rewards. Each miner provides stable, passive income with transparent ROI calculations."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(y,{to:"/app/marketplace",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-semibold hover:shadow-xl hover:shadow-amber-500/50 transition-all",children:[e.jsx(G,{size:20}),"Browse Marketplace",e.jsx(A,{size:20})]}),e.jsx(y,{to:"/app/academy",className:"inline-flex items-center gap-2 px-6 py-3 bg-gray-700 rounded-lg font-semibold hover:bg-gray-600 transition-all",children:"Learn More"})]})]})]})}),e.jsx(we,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ue,{}),e.jsx(ve,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-green-400"})}),e.jsx("h2",{className:"text-xl font-bold",children:"Recent Rewards"})]}),e.jsxs(y,{to:"/app/rewards",className:"text-sm text-amber-400 hover:text-amber-300 flex items-center gap-1",children:["View All",e.jsx(A,{size:16})]})]}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(t=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-all border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(t.reward_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["+",parseFloat(t.net_btc).toFixed(8)," BTC"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("span",{children:["Gross: ",parseFloat(t.gross_btc).toFixed(8)," BTC"]}),e.jsxs("span",{children:["Maint: ",parseFloat(t.maintenance_cost_btc).toFixed(8)," BTC"]})]})]},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx(F,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsxs("p",{className:"text-center",children:["No rewards yet.",e.jsx("br",{}),"Start mining to earn BTC!"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h2",{className:"text-xl font-bold",children:"My Miners"})]}),e.jsxs(y,{to:"/app/miners",className:"text-sm text-amber-400 hover:text-amber-300 flex items-center gap-1",children:["Manage All",e.jsx(A,{size:16})]})]}),l.length>0?e.jsxs("div",{className:"space-y-3",children:[l.slice(0,3).map(t=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-all border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsxs("div",{className:"font-semibold",children:["Miner #",t.id.slice(0,8)]})]}),e.jsx("div",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-xs rounded-full font-semibold uppercase",children:t.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-900/50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Hashrate"}),e.jsxs("div",{className:"font-bold text-amber-400",children:[parseFloat(t.hashrate).toFixed(2)," TH/s"]})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-900/50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Efficiency"}),e.jsxs("div",{className:"font-bold text-blue-400",children:[parseFloat(t.efficiency).toFixed(2)," W/TH"]})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-900/50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Power"}),e.jsxs("div",{className:"font-bold text-white",children:["Lv.",t.power_level]})]})]})]},t.id)),l.length>3&&e.jsxs("div",{className:"text-center text-sm text-gray-400 py-2",children:["+",l.length-3," more miner",l.length-3!==1?"s":""]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx(_,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsxs("p",{className:"text-center",children:["No miners yet.",e.jsx("br",{}),"Purchase your first miner!"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(L,{className:"w-6 h-6 text-amber-400"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(y,{to:"/app/marketplace",className:"group p-6 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl hover:from-amber-500/10 hover:to-orange-500/10 border border-gray-700 hover:border-amber-500/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-500/10 rounded-xl group-hover:bg-amber-500/20 transition-all",children:e.jsx(G,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:"Buy Miners"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Browse marketplace for NFT miners"})]})]})}),e.jsx(y,{to:"/app/academy",className:"group p-6 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl hover:from-blue-500/10 hover:to-cyan-500/10 border border-gray-700 hover:border-blue-500/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl group-hover:bg-blue-500/20 transition-all",children:e.jsx(de,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:"Learn & Earn"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Complete courses for TYT rewards"})]})]})}),e.jsx(y,{to:"/app/wallet",className:"group p-6 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl hover:from-green-500/10 hover:to-emerald-500/10 border border-gray-700 hover:border-green-500/50 transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-green-500/10 rounded-xl group-hover:bg-green-500/20 transition-all",children:e.jsx(Y,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg mb-1",children:"Manage Wallet"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Deposits, withdrawals & swaps"})]})]})})]})]}),a&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(oe,{className:"w-6 h-6 text-amber-400"}),"Account Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Member Since"}),e.jsx("div",{className:"font-bold text-white",children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Spent"}),e.jsxs("div",{className:"font-bold text-amber-400",children:["$",parseFloat(a.total_spent).toFixed(2)]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Referrals"}),e.jsx("div",{className:"font-bold text-green-400",children:a.referral_count||0})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"KYC Status"}),e.jsx("div",{className:`font-bold ${a.kyc_status==="verified"?"text-green-400":"text-yellow-400"}`,children:a.kyc_status||"Pending"})]})]})]})]})}export{Fe as default};

import{r as c,j as e,b as u,z as g}from"./index-Cb_Vey4A.js";function N(){const[r,o]=c.useState("loading"),[d,n]=c.useState({}),[s,i]=c.useState("pending");return c.useEffect(()=>{async function m(){try{const t="https://xyvzpezqavqujpxodtre.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5dnpwZXpxYXZxdWpweG9kdHJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2OTg4MDYsImV4cCI6MjA4MTI3NDgwNn0.BZXDIgovdQHIkhjAKvHr8S1zP7buxiPk0yWmxp2qsOg";n({url_present:!!t,url_value:t,key_present:!!l,key_length:l?.length||0});const{data:p,error:x}=await g.from("profiles").select("count").limit(1);x?(o("error"),n(a=>({...a,db_error:x.message}))):(o("success"),n(a=>({...a,db_connection:"OK"}))),i("testing");const{data:b,error:h}=await g.auth.getSession();h?(i("error"),n(a=>({...a,auth_error:h.message}))):(i("success"),n(a=>({...a,auth_api:"OK",session:b.session?"Active":"None"})))}catch(t){o("error"),i("error"),n(l=>({...l,exception:t instanceof Error?t.message:"Unknown error",is_network_error:t instanceof TypeError&&t.message.includes("fetch")}))}}m()},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white p-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Supabase Connection Test"}),e.jsx(u,{to:"/",className:"text-sm text-gray-400 hover:text-gray-300",children:"Back to home"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("div",{className:`p-4 rounded-lg border ${r==="loading"?"bg-blue-900/20 border-blue-500/30":r==="success"?"bg-green-900/20 border-green-500/30":"bg-red-900/20 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Database: "}),e.jsx("span",{className:`${r==="loading"?"text-blue-400":r==="success"?"text-green-400":"text-red-400"}`,children:r==="loading"?"Testing...":r==="success"?"Connected":"Failed"})]})}),e.jsx("div",{className:`p-4 rounded-lg border ${s==="pending"?"bg-gray-900/20 border-gray-500/30":s==="testing"?"bg-blue-900/20 border-blue-500/30":s==="success"?"bg-green-900/20 border-green-500/30":"bg-red-900/20 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Auth API: "}),e.jsx("span",{className:`${s==="pending"?"text-gray-400":s==="testing"?"text-blue-400":s==="success"?"text-green-400":"text-red-400"}`,children:s==="pending"?"Waiting...":s==="testing"?"Testing...":s==="success"?"Connected":"Failed"})]})})]}),e.jsx("div",{className:`p-6 rounded-lg ${r==="loading"?"bg-blue-900/20":r==="success"&&s==="success"?"bg-green-900/20":"bg-red-900/20"}`,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"Details:"}),e.jsx("pre",{className:"bg-black/30 p-4 rounded text-sm overflow-auto",children:JSON.stringify(d,null,2)})]})}),d.is_network_error&&e.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/50 rounded-lg",children:[e.jsx("h3",{className:"text-red-400 font-semibold mb-2",children:"Network Error Detected"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Unable to connect to Supabase Auth API. This usually means:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-300 list-disc list-inside",children:[e.jsx("li",{children:"Supabase project is paused (check dashboard)"}),e.jsx("li",{children:"Invalid Supabase URL in .env file"}),e.jsx("li",{children:"Network connectivity issues"})]})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Instructions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-300",children:[e.jsx("li",{children:"Check that VITE_SUPABASE_URL is present"}),e.jsx("li",{children:"Check that VITE_SUPABASE_ANON_KEY is present and has proper length"}),e.jsx("li",{children:"If values are missing, restart the dev server"}),e.jsx("li",{children:"If error persists, check browser console for details"}),e.jsxs("li",{children:[e.jsx("strong",{children:"If signup fails:"})," Check Supabase Dashboard → Authentication → Settings",e.jsx("br",{}),'Ensure "Confirm Email" is DISABLED for development']})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-300 mb-2",children:"Common Issues:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:'• "Database error" → Disable email confirmation in Supabase Dashboard'}),e.jsx("li",{children:'• "Network error" → Check environment variables above'}),e.jsx("li",{children:`• "Invalid credentials" → User doesn't exist, try signup first`})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("a",{href:"/signup",className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg transition",children:"Go to Signup"}),e.jsx("a",{href:"/login",className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition",children:"Go to Login"})]})]})]})})}export{N as default};

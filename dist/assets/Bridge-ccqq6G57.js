import{c as E,E as L,r as t,z as N,j as e,Y as U,d as H,A as O,O as R}from"./index-Cb_Vey4A.js";import{L as v}from"./loader-2-CvgjdlF_.js";const I=E("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),n=[{code:"SOL",name:"Solana",icon:"â—Ž",tokens:["SOL","TYT","USDT"]},{code:"ETH",name:"Ethereum",icon:"Îž",tokens:["ETH","USDT","wBTC"]},{code:"BSC",name:"BNB Chain",icon:"â¬¡",tokens:["BNB","USDT","TYT"]},{code:"MATIC",name:"Polygon",icon:"â¬¢",tokens:["MATIC","USDT","TYT"]},{code:"TRX",name:"TRON",icon:"â¬£",tokens:["TRX","USDT"]},{code:"AVAX",name:"Avalanche",icon:"ðŸ”º",tokens:["AVAX","USDT"]},{code:"TON",name:"TON",icon:"ðŸ’Ž",tokens:["TON","USDT"]}];function X(){const{user:d}=L(),[r,h]=t.useState(n[0]),[a,g]=t.useState(n[1]),[l,w]=t.useState("USDT"),[o,u]=t.useState(""),[i,b]=t.useState(""),[y,f]=t.useState(!1),[m,T]=t.useState(0),[C,M]=t.useState("5-10"),[j,A]=t.useState([]),[x,k]=t.useState(!1);t.useEffect(()=>{d&&p()},[d]),t.useEffect(()=>{T(.5+.2)},[r,a,l]);const p=async()=>{if(!d)return;const{data:s,error:c}=await N.from("cross_chain_transfers").select("*").eq("user_id",d.id).order("created_at",{ascending:!1}).limit(10);s&&A(s)},S=()=>{const s=r;h(a),g(s)},D=async()=>{if(!(!d||!o||!i)){f(!0);try{const{data:s,error:c}=await N.from("cross_chain_transfers").insert({user_id:d.id,from_blockchain:r.code.toLowerCase(),to_blockchain:a.code.toLowerCase(),token_symbol:l,amount:parseFloat(o),bridge_fee:parseFloat(o)*m/100,from_address:"auto-generated",to_address:i,bridge_provider:"wormhole",status:"initiated"}).select().single();if(c)throw c;alert("Bridge transfer initiated! Check history for status updates."),u(""),b(""),p()}catch(s){console.error("Bridge error:",s),alert(s.message||"Bridge transfer failed")}finally{f(!1)}}},_=r.tokens.filter(s=>a.tokens.includes(s)),F=s=>{switch(s){case"completed":return"text-green-400";case"failed":return"text-red-400";case"bridging":return"text-yellow-400";default:return"text-gray-400"}},B=s=>{switch(s){case"completed":return e.jsx(R,{className:"w-4 h-4"});case"failed":return e.jsx(O,{className:"w-4 h-4"});default:return e.jsx(v,{className:"w-4 h-4 animate-spin"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Cross-Chain Bridge"}),e.jsx("p",{className:"text-gray-400",children:"Transfer assets between different blockchains seamlessly"})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-8 border border-gray-700/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"From Network"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:n.map(s=>e.jsxs("button",{onClick:()=>s.code!==a.code&&h(s),disabled:s.code===a.code,className:`p-4 rounded-lg border-2 transition-all ${r.code===s.code?"border-[#D2A44C] bg-[#D2A44C]/10":s.code===a.code?"border-gray-700/50 bg-gray-800/30 opacity-50 cursor-not-allowed":"border-gray-700/50 bg-gray-800/30 hover:border-gray-600"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:s.icon}),e.jsx("div",{className:"text-sm font-medium text-white",children:s.name})]},s.code))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:S,className:"p-3 rounded-full bg-gray-800 border border-gray-700 hover:border-[#D2A44C] hover:bg-gray-700 transition-all",children:e.jsx(I,{className:"w-5 h-5 text-[#D2A44C]"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"To Network"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:n.map(s=>e.jsxs("button",{onClick:()=>s.code!==r.code&&g(s),disabled:s.code===r.code,className:`p-4 rounded-lg border-2 transition-all ${a.code===s.code?"border-[#D2A44C] bg-[#D2A44C]/10":s.code===r.code?"border-gray-700/50 bg-gray-800/30 opacity-50 cursor-not-allowed":"border-gray-700/50 bg-gray-800/30 hover:border-gray-600"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:s.icon}),e.jsx("div",{className:"text-sm font-medium text-white",children:s.name})]},s.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Token"}),e.jsx("div",{className:"flex gap-3",children:_.map(s=>e.jsx("button",{onClick:()=>w(s),className:`px-6 py-3 rounded-lg border-2 transition-all ${l===s?"border-[#D2A44C] bg-[#D2A44C]/10 text-white":"border-gray-700/50 bg-gray-800/30 text-gray-400 hover:border-gray-600"}`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:o,onChange:s=>u(s.target.value),placeholder:"0.00",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#D2A44C]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Destination Address on ",a.name]}),e.jsx("input",{type:"text",value:i,onChange:s=>b(s.target.value),placeholder:`Enter ${a.name} address`,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#D2A44C]"})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Bridge Fee:"}),e.jsxs("span",{className:"text-white font-medium",children:[m,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Estimated Time:"}),e.jsxs("span",{className:"text-white font-medium",children:[C," minutes"]})]}),e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"Bridge Provider:"}),e.jsx("span",{className:"text-white font-medium",children:"Wormhole"})]}),o&&e.jsx("div",{className:"pt-2 border-t border-blue-500/20",children:e.jsxs("div",{className:"flex justify-between text-gray-300",children:[e.jsx("span",{children:"You will receive:"}),e.jsxs("span",{className:"text-white font-medium",children:["~",(parseFloat(o)*(1-m/100)).toFixed(6)," ",l]})]})})]})]})}),e.jsx("button",{onClick:D,disabled:y||!o||!i||parseFloat(o)<=0,className:"w-full py-4 bg-gradient-to-r from-[#D2A44C] to-yellow-600 text-white font-bold rounded-lg hover:shadow-lg hover:shadow-[#D2A44C]/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-5 h-5"}),"Bridge ",l]})})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Transfer History"}),e.jsxs("button",{onClick:()=>k(!x),className:"text-[#D2A44C] hover:text-yellow-400 text-sm",children:[x?"Hide":"Show"," History"]})]}),x&&e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No bridge transfers yet"}):j.map(s=>e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white font-medium",children:[s.amount," ",s.token_symbol]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:[s.from_blockchain.toUpperCase()," â†’ ",s.to_blockchain.toUpperCase()]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{className:`flex items-center gap-2 ${F(s.status)}`,children:[B(s.status),e.jsx("span",{className:"text-sm font-medium capitalize",children:s.status})]})]})},s.id))})]})]})}export{X as default};

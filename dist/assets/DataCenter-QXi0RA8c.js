import{c as B,z as _,r as x,j as e,o as T,Z as L,H as $,G as E,an as p,C as N,ao as U,S as I,e as R,I as k,J as F,V as z}from"./index-Cb_Vey4A.js";import{R as Y}from"./refresh-cw-DbeEGu-Y.js";import{A as C}from"./activity-XNIBoXMN.js";import{C as G}from"./clock-ClFQAG9n.js";const O=B("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const W=B("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),K=2,D=12;async function P(){const a=new Date,c=new Date(a.getTime()-1440*60*1e3),o=new Date(a.getTime()-10080*60*1e3),l=new Date(a.getTime()-720*60*60*1e3),{data:i}=await _.from("burn_events").select("amount_tyt, burned_at, burn_type").eq("status","confirmed"),d=i||[],m=d.reduce((n,s)=>n+s.amount_tyt,0),h=d.filter(n=>new Date(n.burned_at)>c).reduce((n,s)=>n+s.amount_tyt,0),t=d.filter(n=>new Date(n.burned_at)>o).reduce((n,s)=>n+s.amount_tyt,0),u=d.filter(n=>new Date(n.burned_at)>l).reduce((n,s)=>n+s.amount_tyt,0),j=d.filter(n=>n.burn_type==="charity_mint").reduce((n,s)=>n+s.amount_tyt,0),y=A();return{totalBurned:m,burnedLast24h:h,burnedLast7d:t,burnedLast30d:u,nextScheduledBurn:y,charityMintTotal:j}}function A(){const a=new Date,c=a.getUTCDay(),o=a.getUTCHours();let l=K-c;(l<0||l===0&&o>=D)&&(l+=7);const i=new Date(a);return i.setUTCDate(i.getUTCDate()+l),i.setUTCHours(D,0,0,0),i}function H(){const a=new Date,o=A().getTime()-a.getTime(),l=Math.max(0,Math.floor(o/1e3)),i=Math.floor(l/(1440*60)),d=Math.floor(l%(1440*60)/3600),m=Math.floor(l%3600/60),h=l%60;return{days:i,hours:d,minutes:m,seconds:h,totalSeconds:l}}async function Z(){const{data:a,error:c}=await _.from("chain_observer_config").select("network, is_active, last_processed_block, health_status, last_health_check").order("network");if(c)throw c;return a||[]}function q(){const[a,c]=x.useState(null),[o,l]=x.useState(!0),[i,d]=x.useState({days:0,hours:0,minutes:0,seconds:0});x.useEffect(()=>{m();const t=setInterval(m,6e4);return()=>clearInterval(t)},[]),x.useEffect(()=>{const t=setInterval(()=>{d(H())},1e3);return()=>clearInterval(t)},[]);async function m(){try{const[t,u]=await Promise.all([P(),Z().catch(()=>[])]),j=u.filter(s=>s.health_status==="healthy").length,y=u.length||1,n=j/y;c({totalBurned:t.totalBurned,burnedLast24h:t.burnedLast24h,charityMintTotal:t.charityMintTotal,nextBurnCountdown:H(),chainStatus:u.map(s=>({network:s.network,status:s.health_status,lastBlock:s.last_processed_block})),systemHealth:n>=.8?"healthy":n>=.5?"degraded":"down"})}catch(t){console.error("Failed to load ecosystem metrics:",t)}finally{l(!1)}}function h(t){return t>=1e6?`${(t/1e6).toFixed(2)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toLocaleString()}return o?e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(Y,{className:"w-8 h-8 text-amber-400 animate-spin"})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-amber-400"}),"Ecosystem Status"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?.systemHealth==="healthy"?"bg-green-400 animate-pulse":a?.systemHealth==="degraded"?"bg-yellow-400 animate-pulse":"bg-red-400"}`}),e.jsx("span",{className:"text-sm text-gray-400 capitalize",children:a?.systemHealth||"Unknown"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{icon:T,label:"Total TYT Burned",value:h(a?.totalBurned||0),suffix:"TYT",color:"orange",trend:"+2.4%"}),e.jsx(v,{icon:L,label:"Burned (24h)",value:h(a?.burnedLast24h||0),suffix:"TYT",color:"amber"}),e.jsx(v,{icon:$,label:"Charity Minted",value:h(a?.charityMintTotal||0),suffix:"TYT",color:"pink"}),e.jsx(v,{icon:E,label:"Active Chains",value:String(a?.chainStatus?.filter(t=>t.status==="healthy").length||0),suffix:`/ ${a?.chainStatus?.length||0}`,color:"cyan"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-xl border border-orange-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Next Scheduled Burn"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Every Tuesday at 12:00 UTC"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx(w,{value:i.days,label:"Days"}),e.jsx(w,{value:i.hours,label:"Hours"}),e.jsx(w,{value:i.minutes,label:"Min"}),e.jsx(w,{value:i.seconds,label:"Sec"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:e.jsx(p,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Chain Observers"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Multi-chain monitoring status"})]})]}),e.jsxs("div",{className:"space-y-2",children:[(a?.chainStatus||[]).slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="healthy"?e.jsx(N,{className:"w-4 h-4 text-green-400"}):e.jsx(U,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"capitalize",children:t.network})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Block #",t.lastBlock.toLocaleString()]})]},t.network)),(!a?.chainStatus||a.chainStatus.length===0)&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"Chain observers initializing..."})})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-500/5 via-orange-500/5 to-red-500/5 rounded-xl border border-amber-500/20 p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Ecosystem Security"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4 text-green-400"}),"Smart Contracts Audited"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4 text-green-400"}),"Multi-sig Treasury"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4 text-green-400"}),"Real-time Monitoring"]})]})]})})]})}function v({icon:a,label:c,value:o,suffix:l,color:i,trend:d}){const m={orange:"from-orange-500/20 to-orange-600/10 border-orange-500/30 text-orange-400",amber:"from-amber-500/20 to-amber-600/10 border-amber-500/30 text-amber-400",pink:"from-pink-500/20 to-pink-600/10 border-pink-500/30 text-pink-400",cyan:"from-cyan-500/20 to-cyan-600/10 border-cyan-500/30 text-cyan-400",green:"from-green-500/20 to-green-600/10 border-green-500/30 text-green-400"};return e.jsxs("div",{className:`bg-gradient-to-br ${m[i]} rounded-xl border p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(a,{className:`w-5 h-5 ${m[i].split(" ").pop()}`}),d&&e.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),d]})]}),e.jsxs("div",{className:"text-2xl font-bold",children:[o,l&&e.jsx("span",{className:"text-sm font-normal text-gray-400 ml-1",children:l})]}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:c})]})}function w({value:a,label:c}){return e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-400",children:String(a).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:c})]})}function te(){const[a,c]=x.useState([]),[o,l]=x.useState(null),[i,d]=x.useState([]),[m,h]=x.useState(!0),[t,u]=x.useState({totalHashrate:0,totalMiners:0,avgEfficiency:0,avgUptime:0});x.useEffect(()=>{j();const r=setInterval(y,5e3);return()=>clearInterval(r)},[]);async function j(){h(!0);try{const{data:r,error:f}=await _.from("data_centers").select("*").eq("is_active",!0).order("name");if(f)throw f;if(r&&r.length>0){const b=r.map(g=>({...g,status:g.is_active?"online":"offline",hashrate:g.used_capacity_th||0,temperature:Math.floor(Math.random()*10)+35,efficiency:28.5,uptime:99.95,miners:Math.floor((g.used_capacity_th||0)/100)}));c(b),!o&&b[0]&&l(b[0].id);const V=b.reduce((g,S)=>g+(S.total_capacity_th||0),0),M=b.reduce((g,S)=>g+(S.used_capacity_th||0),0);u({totalHashrate:M,totalMiners:Math.floor(M/100),avgEfficiency:28.5,avgUptime:99.95})}}catch(r){console.error("Error loading data centers:",r)}finally{h(!1)}}function y(){d(r=>{const f={timestamp:new Date().toISOString(),hashrate:t.totalHashrate+(Math.random()-.5)*10,power:t.totalHashrate*t.avgEfficiency*(.95+Math.random()*.1)};return[...r.slice(1),f]})}const n=r=>{switch(r){case"online":return"text-green-400 bg-green-500/20";case"maintenance":return"text-amber-400 bg-amber-500/20";case"offline":return"text-red-400 bg-red-500/20";default:return"text-gray-400 bg-gray-500/20"}},s=a.find(r=>r.id===o);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-blue-400"}),"Data Center Network"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Real-time monitoring of global mining infrastructure"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 rounded-full",children:[e.jsx(C,{className:"w-4 h-4"}),"Live"]}),e.jsxs("span",{className:"text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-xl p-6 border border-blue-500/30",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(E,{className:"w-8 h-8 text-blue-400"})}),e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-1",children:a.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Active Data Centers"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(k,{className:"w-8 h-8 text-amber-400"})}),e.jsxs("div",{className:"text-3xl font-bold text-amber-400 mb-1",children:[t.totalHashrate.toFixed(1)," TH/s"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Hashrate"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(p,{className:"w-8 h-8 text-green-400"})}),e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-1",children:t.totalMiners.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-400",children:"Active Miners"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx(C,{className:"w-8 h-8 text-emerald-400"})}),e.jsxs("div",{className:"text-3xl font-bold text-emerald-400 mb-1",children:[t.avgUptime.toFixed(2),"%"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Network Uptime"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-amber-400"}),"Live Hashrate Feed"]}),e.jsx("div",{className:"h-48 flex items-end gap-1",children:i.map((r,f)=>{const b=r.hashrate/(t.totalHashrate*1.1)*100;return e.jsx("div",{className:"flex-1 bg-gradient-to-t from-blue-500 to-cyan-400 rounded-t transition-all duration-500",style:{height:`${b}%`},title:`${r.hashrate.toFixed(1)} TH/s`},f)})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"20 min ago"}),e.jsx("span",{children:"Now"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-gray-400"}),"Network Status"]}),e.jsx("div",{className:"space-y-3",children:a.map(r=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${o===r.id?"bg-blue-500/20 border border-blue-500/50":"bg-gray-900/50 hover:bg-gray-900"}`,onClick:()=>l(r.id),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${(r.status||"online")==="online"?"bg-green-400":(r.status||"online")==="maintenance"?"bg-amber-400":"bg-red-400"}`}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[r.hashrate||0," TH/s"]})]},r.id))})]})]}),s&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-blue-400"}),s.name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.location,", ",s.country_code]})]}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2 ${n(s.status||"online")}`,children:[s.status==="online"&&e.jsx(N,{className:"w-4 h-4"}),s.status==="maintenance"&&e.jsx(U,{className:"w-4 h-4"}),(s.status||"online").charAt(0).toUpperCase()+(s.status||"online").slice(1)]})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Hashrate"]}),e.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[s.hashrate||0," TH/s"]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Temperature"]}),e.jsxs("div",{className:`text-2xl font-bold ${(s.temperature||0)>45?"text-red-400":(s.temperature||0)>40?"text-amber-400":"text-green-400"}`,children:[s.temperature||0,"Â°C"]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Efficiency"]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[s.efficiency||0," W/TH"]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Uptime"]}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[s.uptime||0,"%"]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Miners"]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:(s.miners||0).toLocaleString()})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(p,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg mb-2",children:"Enterprise-Grade Infrastructure"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Our data centers are strategically located across the globe to ensure optimal mining performance, low latency, and compliance with local regulations. All facilities are powered by renewable energy where possible and maintained by professional teams 24/7."}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"99.9% SLA Guarantee"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"24/7 Monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"Green Energy Priority"})]})]})]})]})}),e.jsx(q,{})]})}export{te as default};

import{E as D,ak as P,r as d,z as j,j as e,f as I,n as M,M as q,U as y,C as z,D as F,e as G}from"./index-Cb_Vey4A.js";import{S as N}from"./share-2-CIhziOm-.js";import{C as v}from"./copy-Dce-p0Na.js";function O(){const{user:n}=D(),o=P(),[r,c]=d.useState({totalReferrals:0,activeReferrals:0,totalEarnings:0,monthlyEarnings:0,pendingRewards:0,tier:"Bronze"}),[i,m]=d.useState([]),[t,w]=d.useState(""),[k,h]=d.useState(!0),[p,_]=d.useState(!1);d.useEffect(()=>{n&&C()},[n]);const C=async()=>{if(n){h(!0);try{const{data:s}=await j.from("profiles").select("referral_code").eq("id",n.id).maybeSingle();s&&w(s.referral_code);const{data:l}=await j.from("referrals").select(`
          id,
          referred_user_id,
          status,
          total_commission_earned,
          created_at,
          referred:profiles!referrals_referred_user_id_fkey(email, username)
        `).eq("referrer_user_id",n.id).order("created_at",{ascending:!1});if(l){const U=l.map(a=>({id:a.id,referred_email:a.referred?.email||"N/A",referred_username:a.referred?.username||"User",status:a.status,total_spent:0,your_commission:a.total_commission_earned||0,joined_at:a.created_at}));m(U);const f=l.reduce((a,B)=>a+(B.total_commission_earned||0),0),Y=l.filter(a=>a.status==="active").length;c({totalReferrals:l.length,activeReferrals:Y,totalEarnings:f,monthlyEarnings:f*.3,pendingRewards:0,tier:R(l.length)})}}catch(s){console.error("Error loading referral data:",s)}finally{h(!1)}}},R=s=>s>=50?"Platinum":s>=20?"Gold":s>=5?"Silver":"Bronze",b=s=>{switch(s){case"Platinum":return"from-cyan-400 to-blue-500";case"Gold":return"from-amber-400 to-yellow-500";case"Silver":return"from-gray-400 to-gray-500";default:return"from-amber-700 to-orange-700"}},S=s=>{switch(s){case"Platinum":return"15%";case"Gold":return"12%";case"Silver":return"8%";default:return"5%"}},T=()=>{navigator.clipboard.writeText(t),o.showSuccess("Referral code copied!")},$=()=>{const s=`https://takeyourtoken.app/signup?ref=${t}`;navigator.clipboard.writeText(s),o.showSuccess("Referral link copied!")},E=()=>{const s="Join TakeYourToken - Mine Bitcoin & Support Children",l=`Hi!

I've been using TakeYourToken to mine Bitcoin while supporting children's brain cancer research. It's an amazing platform!

Use my referral code to get started: ${t}

Sign up here: https://takeyourtoken.app/signup?ref=${t}

Every transaction helps save children's lives!

Best regards`;window.location.href=`mailto:?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(l)}`},g=s=>{switch(s){case"active":return"bg-green-500/20 text-green-400 border-green-500/50";case"verified":return"bg-blue-500/20 text-blue-400 border-blue-500/50";default:return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50"}};return k?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Referral Program"}),e.jsx("p",{className:"text-gray-400",children:"Earn commission by inviting friends to TakeYourToken"})]}),e.jsxs("div",{className:`bg-gradient-to-br ${b(r.tier)} bg-opacity-20 border border-current rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${b(r.tier)} flex items-center justify-center`,children:e.jsx(I,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[r.tier," Tier"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[S(r.tier)," commission on referrals"]})]})]}),e.jsxs("button",{onClick:()=>_(!p),className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors border border-white/20 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Share"]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"text-sm text-gray-300 mb-2 block",children:"Your Referral Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("code",{className:"flex-1 text-2xl font-bold tracking-wider",children:t}),e.jsx("button",{onClick:T,className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(v,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mt-4 bg-black/20 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"text-sm text-gray-300 mb-2 block",children:"Your Referral Link"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:`https://takeyourtoken.app/signup?ref=${t}`,readOnly:!0,className:"flex-1 bg-transparent text-sm outline-none"}),e.jsx("button",{onClick:$,className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(v,{className:"w-5 h-5"})})]})]}),p&&e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsxs("button",{onClick:E,className:"flex-1 px-4 py-3 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/50 flex items-center justify-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{onClick:()=>{const s=`https://takeyourtoken.app/signup?ref=${t}`;window.open(`https://telegram.me/share/url?url=${encodeURIComponent(s)}&text=Join TakeYourToken and support children!`,"_blank")},className:"flex-1 px-4 py-3 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors border border-cyan-500/50 flex items-center justify-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Telegram"]}),e.jsxs("button",{onClick:()=>{const s=`https://takeyourtoken.app/signup?ref=${t}`;window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent("Join TakeYourToken - Mine Bitcoin & Support Children!")}&url=${encodeURIComponent(s)}`,"_blank")},className:"flex-1 px-4 py-3 bg-sky-500/20 text-sky-400 rounded-lg hover:bg-sky-500/30 transition-colors border border-sky-500/50 flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Twitter"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(x,{icon:e.jsx(y,{className:"w-6 h-6"}),label:"Total Referrals",value:r.totalReferrals.toString(),color:"blue"}),e.jsx(x,{icon:e.jsx(z,{className:"w-6 h-6"}),label:"Active Referrals",value:r.activeReferrals.toString(),color:"green"}),e.jsx(x,{icon:e.jsx(F,{className:"w-6 h-6"}),label:"Total Earnings",value:`$${r.totalEarnings.toFixed(2)}`,color:"amber"}),e.jsx(x,{icon:e.jsx(G,{className:"w-6 h-6"}),label:"This Month",value:`$${r.monthlyEarnings.toFixed(2)}`,color:"purple"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Tier Progress"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{name:"Bronze",commission:"5%",required:"0-4 referrals",current:r.totalReferrals,max:4,active:r.tier==="Bronze"}),e.jsx(u,{name:"Silver",commission:"8%",required:"5-19 referrals",current:r.totalReferrals,max:19,active:r.tier==="Silver"}),e.jsx(u,{name:"Gold",commission:"12%",required:"20-49 referrals",current:r.totalReferrals,max:49,active:r.tier==="Gold"}),e.jsx(u,{name:"Platinum",commission:"15%",required:"50+ referrals",current:r.totalReferrals,max:50,active:r.tier==="Platinum"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h3",{className:"text-xl font-bold",children:"Your Referrals"})}),i.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-400",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No referrals yet"}),e.jsx("p",{className:"text-sm",children:"Share your referral code to start earning commissions!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-900/50 border-b border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase",children:"Your Commission"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase",children:"Joined"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:i.map(s=>e.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.referred_username}),e.jsx("div",{className:"text-sm text-gray-400",children:s.referred_email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${g(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-green-400",children:["$",s.your_commission.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-400",children:new Date(s.joined_at).toLocaleDateString()})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-800",children:i.map(s=>e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.referred_username}),e.jsx("div",{className:"text-xs text-gray-400",children:s.referred_email})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold border ${g(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:new Date(s.joined_at).toLocaleDateString()}),e.jsxs("span",{className:"font-bold text-green-400",children:["$",s.your_commission.toFixed(2)]})]})]},s.id))})]})]})]})}function x({icon:n,label:o,value:r,color:c}){const i={blue:"bg-blue-500/10 border-blue-500/50 text-blue-400",green:"bg-green-500/10 border-green-500/50 text-green-400",amber:"bg-amber-500/10 border-amber-500/50 text-amber-400",purple:"bg-purple-500/10 border-purple-500/50 text-purple-400"};return e.jsxs("div",{className:`${i[c]} border rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n,e.jsx("span",{className:"text-sm text-gray-400",children:o})]}),e.jsx("p",{className:"text-2xl font-bold",children:r})]})}function u({name:n,commission:o,required:r,current:c,max:i,active:m}){const t=Math.min(c/i*100,100);return e.jsxs("div",{className:`p-4 rounded-lg border ${m?"bg-blue-500/10 border-blue-500/50":"bg-gray-800/50 border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold",children:n}),m&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Current"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-green-400",children:o}),e.jsx("div",{className:"text-xs text-gray-400",children:r})]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500 transition-all duration-300",style:{width:`${t}%`}})})]})}export{O as default};

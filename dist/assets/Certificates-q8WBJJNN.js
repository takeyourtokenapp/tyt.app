import{E as N,r as o,z as y,j as e,f as h,S as f,u as w,af as u}from"./index-Cb_Vey4A.js";import{S as k}from"./share-2-CIhziOm-.js";import{D as j}from"./download-DeDhYPeV.js";import{E as S}from"./external-link-Dv1yQxy7.js";function C(){const{user:l}=N(),[i,g]=o.useState([]),[d,c]=o.useState(!0),[a,n]=o.useState(null);o.useEffect(()=>{l&&m()},[l]);const m=async()=>{try{c(!0);const{data:s,error:t}=await y.from("academy_certificates").select(`
          *,
          template:cert_template_id (
            name,
            description,
            category,
            rarity,
            skill_points
          )
        `).eq("user_id",l?.id).order("issued_date",{ascending:!1});if(t)throw t;g(s||[])}catch(s){console.error("Error loading certificates:",s)}finally{c(!1)}},p=s=>{const t={common:"from-gray-500 to-gray-600 border-gray-400",uncommon:"from-green-500 to-emerald-500 border-green-400",rare:"from-blue-500 to-cyan-500 border-blue-400",epic:"from-purple-500 to-pink-500 border-purple-400",legendary:"from-yellow-500 to-amber-500 border-yellow-400"};return t[s]||t.common},x=s=>({blockchain:"â›“ï¸",defi:"ðŸ’°",nft:"ðŸŽ¨",security:"ðŸ”",development:"ðŸ’»"})[s]||"ðŸŽ“",b=s=>{const t=`${window.location.origin}/verify/${s.verification_code}`;navigator.clipboard.writeText(t)},r=s=>{console.log("Download certificate:",s.certificate_number)};return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-gold-400 border-t-transparent rounded-full animate-spin"})}):i.length===0?e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-2xl p-12 text-center",children:[e.jsx(h,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"No Certificates Yet"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Complete Academy lessons to earn your first Soulbound NFT certificate!"}),e.jsx("a",{href:"/app/academy",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gold-400 to-gold-500 hover:from-gold-500 hover:to-gold-600 text-black font-bold rounded-xl transition-all",children:"Start Learning"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Your Certificates"}),e.jsx("p",{className:"text-gray-400",children:"Soulbound NFTs - Non-transferable proof of achievement"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gold-500/20 border border-gold-500/50 rounded-xl",children:[e.jsx(f,{className:"w-5 h-5 text-gold-400"}),e.jsxs("span",{className:"font-bold text-gold-400",children:[i.length," Earned"]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs("div",{onClick:()=>n(s),className:"bg-gray-800 border-2 border-gray-700 hover:border-gold-500 rounded-2xl p-6 cursor-pointer transition-all hover:scale-105 group",children:[e.jsxs("div",{className:`bg-gradient-to-r ${p(s.template.rarity)} p-4 rounded-xl mb-4 text-center border-2 shadow-lg`,children:[e.jsx("div",{className:"text-6xl mb-2",children:x(s.template.category)}),e.jsx("div",{className:"text-xs uppercase tracking-wider font-bold text-white/80",children:s.template.rarity})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-gold-400 transition-colors",children:s.template.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 line-clamp-2",children:s.template.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-gold-400"}),e.jsxs("span",{className:"text-gray-400",children:[s.template.skill_points," XP"]})]}),e.jsx("div",{className:"text-gray-500",children:new Date(s.issued_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.skills_earned.slice(0,3).map((t,v)=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-lg border border-blue-500/30",children:t},v))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),b(s)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors text-sm",children:[e.jsx(k,{size:14}),"Share"]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),r(s)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors text-sm",children:[e.jsx(j,{size:14}),"Download"]})]})]},s.id))}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>n(null),children:e.jsxs("div",{className:"bg-gray-900 border-2 border-gold-500 rounded-2xl p-8 max-w-2xl w-full",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:`bg-gradient-to-r ${p(a.template.rarity)} p-8 rounded-xl mb-6 text-center border-2 shadow-2xl`,children:[e.jsx("div",{className:"text-8xl mb-4",children:x(a.template.category)}),e.jsxs("div",{className:"text-sm uppercase tracking-wider font-bold text-white/80 mb-2",children:[a.template.rarity," Certificate"]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:a.template.name}),e.jsx("p",{className:"text-white/90",children:a.template.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Certificate Number"}),e.jsx("span",{className:"font-mono font-bold",children:a.certificate_number})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Verification Code"}),e.jsx("span",{className:"font-mono font-bold",children:a.verification_code})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Issued Date"}),e.jsx("span",{className:"font-bold",children:new Date(a.issued_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-xl",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:"Skills Acquired"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills_earned.map((s,t)=>e.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-lg border border-blue-500/30 flex items-center gap-2",children:[e.jsx(w,{size:14}),s]},t))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>r(a),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-gold-400 to-gold-500 hover:from-gold-500 hover:to-gold-600 text-black font-bold rounded-xl transition-all",children:[e.jsx(j,{size:18}),"Download PDF"]}),e.jsxs("button",{onClick:()=>{const s=`${window.location.origin}/verify/${a.verification_code}`;window.open(s,"_blank")},className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all",children:[e.jsx(S,{size:18}),"Verify Public"]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-bold text-blue-400 mb-1",children:"Soulbound NFT"}),e.jsx("div",{className:"text-gray-300",children:"This certificate is permanently bound to your wallet and cannot be transferred or sold. It serves as immutable proof of your achievement on the blockchain."})]})]})})]})})]})}function P(){const{user:l}=N(),[i,g]=o.useState({totalCertificates:0,totalSkills:0,totalXP:0}),[d,c]=o.useState(!0);o.useEffect(()=>{l&&a()},[l]);const a=async()=>{try{c(!0);const{data:n,error:m}=await y.from("academy_certificates").select("skills_earned, template:cert_template_id(skill_points)").eq("user_id",l?.id);if(m)throw m;const p=n?.length||0,x=new Set;let b=0;n?.forEach(r=>{r.skills_earned&&Array.isArray(r.skills_earned)&&r.skills_earned.forEach(s=>x.add(s)),r.template&&typeof r.template=="object"&&"skill_points"in r.template&&(b+=r.template.skill_points||0)}),g({totalCertificates:p,totalSkills:x.size,totalXP:b})}catch(n){console.error("Error loading certificate stats:",n)}finally{c(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-gold-400 to-gold-500 rounded-2xl",children:e.jsx(u,{size:32,className:"text-black"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"My Certificates"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Your Soulbound NFT achievements"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-cyan-900/20 border border-blue-500/30 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"w-6 h-6 text-blue-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Total Certificates"})]}),e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:d?e.jsx("div",{className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}):i.totalCertificates})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-pink-900/20 border border-purple-500/30 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(f,{className:"w-6 h-6 text-purple-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Total Skills"})]}),e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:d?e.jsx("div",{className:"w-8 h-8 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}):i.totalSkills})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-900/20 to-orange-900/20 border border-amber-500/30 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(u,{className:"w-6 h-6 text-amber-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Total XP Earned"})]}),e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:d?e.jsx("div",{className:"w-8 h-8 border-2 border-amber-400 border-t-transparent rounded-full animate-spin"}):i.totalXP.toLocaleString()})]})]})]}),e.jsx(C,{}),e.jsx("div",{className:"mt-12 bg-gradient-to-r from-gold-900/20 to-amber-900/20 border border-gold-500/30 rounded-2xl p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(f,{className:"w-12 h-12 text-gold-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"What are Soulbound NFTs?"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Soulbound NFTs are non-transferable tokens that represent your achievements and credentials. Unlike regular NFTs, they cannot be sold or transferred, making them perfect for certifications, diplomas, and proof of skill."}),e.jsxs("ul",{className:"space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gold-400 rounded-full"}),e.jsx("span",{children:"Permanently linked to your wallet"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gold-400 rounded-full"}),e.jsx("span",{children:"Verifiable on-chain proof of achievement"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gold-400 rounded-full"}),e.jsx("span",{children:"Can be shared publicly for verification"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-gold-400 rounded-full"}),e.jsx("span",{children:"Build your Web3 resume and skill tree"})]})]})]})]})})]})}export{P as default};

import{c as Z,z as m,E as B,r as c,j as e,O as R,X as L,A as O,h as Y,D as G,e as J,k as X,J as ee,I as D,Z as H}from"./index-Cb_Vey4A.js";import{L as V}from"./loader-2-CvgjdlF_.js";import{A as U}from"./activity-XNIBoXMN.js";import{P as se}from"./plus-CkSgRXyI.js";import{F as re}from"./filter-CbXyuDTl.js";import{C as te}from"./clock-ClFQAG9n.js";const ae=Z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),f={none:{level:"none",name:"None",minTYTBalance:0,marketplaceFeeDiscount:0,maintenanceDiscount:0,reinvestBonus:0,referralBonus:5,color:"gray",icon:"ðŸ¦‰"},bronze:{level:"bronze",name:"Bronze",minTYTBalance:1e4,marketplaceFeeDiscount:10,maintenanceDiscount:5,reinvestBonus:2,referralBonus:7,color:"#CD7F32",icon:"ðŸ¥‰"},silver:{level:"silver",name:"Silver",minTYTBalance:5e4,marketplaceFeeDiscount:20,maintenanceDiscount:10,reinvestBonus:4,referralBonus:10,color:"#C0C0C0",icon:"ðŸ¥ˆ"},gold:{level:"gold",name:"Gold",minTYTBalance:15e4,marketplaceFeeDiscount:30,maintenanceDiscount:15,reinvestBonus:6,referralBonus:12,color:"#FFD700",icon:"ðŸ¥‡"},platinum:{level:"platinum",name:"Platinum",minTYTBalance:5e5,marketplaceFeeDiscount:40,maintenanceDiscount:20,reinvestBonus:8,referralBonus:15,color:"#E5E4E2",icon:"ðŸ’Ž"},diamond:{level:"diamond",name:"Diamond",minTYTBalance:15e5,marketplaceFeeDiscount:50,maintenanceDiscount:25,reinvestBonus:10,referralBonus:20,color:"#B9F2FF",icon:"ðŸ‘‘"}};function le(s){return s>=f.diamond.minTYTBalance?f.diamond:s>=f.platinum.minTYTBalance?f.platinum:s>=f.gold.minTYTBalance?f.gold:s>=f.silver.minTYTBalance?f.silver:s>=f.bronze.minTYTBalance?f.bronze:f.none}async function ie(s){const{data:t}=await m.from("custodial_wallets").select("balance").eq("user_id",s).eq("asset","TYT").maybeSingle(),a=t?parseFloat(t.balance):0,l=le(a),{data:d}=await m.from("vip_tiers").select("*").eq("user_id",s).maybeSingle();return d?await m.from("vip_tiers").update({tier_level:l.level,current_tyt_balance:a.toString(),benefits:{marketplaceFeeDiscount:l.marketplaceFeeDiscount,maintenanceDiscount:l.maintenanceDiscount,reinvestBonus:l.reinvestBonus,referralBonus:l.referralBonus}}).eq("user_id",s):await m.from("vip_tiers").insert({user_id:s,tier_level:l.level,current_tyt_balance:a.toString(),benefits:{marketplaceFeeDiscount:l.marketplaceFeeDiscount,maintenanceDiscount:l.maintenanceDiscount,reinvestBonus:l.reinvestBonus,referralBonus:l.referralBonus}}),l}const ne=.025,ce=.01;async function oe(s,t){try{const{data:a,error:l}=await m.from("marketplace_listings").select(`
        *,
        nft_miners (*)
      `).eq("id",s).eq("status","active").maybeSingle();if(l||!a)return{success:!1,error:"Listing not found or no longer available"};if(a.seller_id===t)return{success:!1,error:"Cannot purchase your own listing"};const{data:d,error:b}=await m.from("custodial_wallets").select("balance").eq("user_id",t).eq("asset",a.list_price_asset).maybeSingle();if(b||!d)return{success:!1,error:"Wallet not found"};const x=parseFloat(a.list_price_amount),o=parseFloat(d.balance);if(o<x)return{success:!1,error:"Insufficient balance"};const y=(await ie(t)).marketplaceFeeDiscount/100,n=ne*(1-y),i=x*n,g=x*ce,v=x-i-g;await m.rpc("process_marketplace_purchase",{p_listing_id:s,p_buyer_id:t,p_seller_id:a.seller_id,p_miner_id:a.miner_id,p_purchase_amount:x,p_asset:a.list_price_asset,p_marketplace_fee:i,p_seller_amount:v}),await m.from("marketplace_listings").update({status:"sold",sold_at:new Date().toISOString(),final_sale_price:a.list_price_amount}).eq("id",s),await m.from("nft_miners").update({owner_id:t,acquired_at:new Date().toISOString()}).eq("id",a.miner_id),await m.from("custodial_wallets").update({balance:(o-x).toString()}).eq("user_id",t).eq("asset",a.list_price_asset);const{data:N}=await m.from("custodial_wallets").select("balance").eq("user_id",a.seller_id).eq("asset",a.list_price_asset).maybeSingle();return N&&await m.from("custodial_wallets").update({balance:(parseFloat(N.balance)+v).toString()}).eq("user_id",a.seller_id).eq("asset",a.list_price_asset),await me(g,a.list_price_asset,t),{success:!0,minerId:a.miner_id,transactionId:s}}catch(a){return console.error("Purchase error:",a),{success:!1,error:"Transaction failed"}}}async function de(s,t,a,l,d="fixed_price"){try{const{data:b}=await m.from("nft_miners").select("*").eq("id",s).eq("owner_id",t).maybeSingle();if(!b)return{success:!1,error:"Miner not found or not owned by you"};if(b.status!=="active")return{success:!1,error:"Only active miners can be listed"};const{data:x}=await m.from("marketplace_listings").select("id").eq("miner_id",s).eq("status","active").maybeSingle();if(x)return{success:!1,error:"Miner is already listed"};const{data:o,error:p}=await m.from("marketplace_listings").insert({miner_id:s,seller_id:t,listing_type:d,list_price_amount:a,list_price_asset:l,status:"active"}).select().single();return p||!o?{success:!1,error:p?.message||"Failed to create listing"}:(await m.from("nft_miners").update({status:"listed"}).eq("id",s),{success:!0,listingId:o.id})}catch(b){return console.error("Create listing error:",b),{success:!1,error:"Failed to create listing"}}}async function me(s,t,a){const d=s*({TYT:.05,USDT:1,BTC:95e3}[t]||1);await m.from("foundation_donations").insert({user_id:a,amount_crypto:s.toString(),crypto_asset:t,amount_usd:d.toString(),donation_source:"marketplace_fee",is_automatic:!0})}async function h({to:s,template:t,data:a}){try{const{data:l,error:d}=await m.functions.invoke("send-email",{body:{to:s,template:t,data:a}});return d?(console.error("Email service error:",d),!1):(console.log("Email sent successfully:",l),!0)}catch(l){return console.error("Failed to send email:",l),!1}}const xe={async welcome(s,t){return h({to:s,template:"welcome",data:{name:t}})},async depositConfirmed(s,t){return h({to:s,template:"depositConfirmed",data:t})},async withdrawalConfirmed(s,t){return h({to:s,template:"withdrawalConfirmed",data:t})},async withdrawalPending(s,t){return h({to:s,template:"withdrawalPending",data:t})},async withdrawalApproved(s,t){return h({to:s,template:"withdrawalApproved",data:t})},async withdrawalRejected(s,t){return h({to:s,template:"withdrawalRejected",data:t})},async dailyRewards(s,t){return h({to:s,template:"dailyRewards",data:t})},async maintenanceInvoice(s,t){return h({to:s,template:"maintenanceInvoice",data:t})},async kycStatusUpdate(s,t){return h({to:s,template:"kycStatusUpdate",data:t})},async securityAlert(s,t){return h({to:s,template:"securityAlert",data:t})},async foundationReceipt(s,t){return h({to:s,template:"foundationReceipt",data:t})}};function ue({listing:s,onClose:t,onSuccess:a}){const{user:l}=B(),[d,b]=c.useState(!1),[x,o]=c.useState(null),[p,y]=c.useState(!1),n=async()=>{if(l){b(!0),o(null);try{const i=await oe(s.id,l.id);if(!i.success){o(i.error||"Purchase failed");return}y(!0),l.email&&await xe.depositConfirmed(l.email,{amount:s.list_price_amount,asset:s.list_price_asset,network:"TYT Marketplace",newBalance:"0"}),setTimeout(()=>{a(),t()},2e3)}catch(i){o("Transaction failed. Please try again."),console.error("Purchase error:",i)}finally{b(!1)}}};return p?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-green-500/50 max-w-md w-full p-8 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Purchase Successful!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The miner has been transferred to your account"}),e.jsx("button",{onClick:()=>{a(),t()},className:"px-6 py-3 bg-green-500 hover:bg-green-600 rounded-lg font-semibold transition-all",children:"View My Miners"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 max-w-lg w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Confirm Purchase"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:e.jsx(L,{size:24})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Miner"}),e.jsx("span",{className:"font-semibold",children:s.nft_miners.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Hashrate"}),e.jsxs("span",{className:"font-semibold",children:[s.nft_miners.hashrate_th," TH/s"]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Efficiency"}),e.jsxs("span",{className:"font-semibold",children:[s.nft_miners.efficiency_w_th," W/TH"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Region"}),e.jsx("span",{className:"font-semibold",children:s.nft_miners.region})]})]}),e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2",children:[e.jsx("span",{children:"Total Price"}),e.jsxs("span",{className:"text-amber-400",children:[s.list_price_amount," ",s.list_price_asset]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marketplace fee (2.5%)"}),e.jsxs("span",{children:[(parseFloat(s.list_price_amount)*.025).toFixed(4)," ",s.list_price_asset]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Foundation donation (1%)"}),e.jsxs("span",{children:[(parseFloat(s.list_price_amount)*.01).toFixed(4)," ",s.list_price_asset]})]})]})]}),x&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(O,{size:20}),e.jsx("span",{children:x})]})}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/50 rounded-lg p-4",children:e.jsx("div",{className:"text-sm text-gray-300",children:"This purchase will be processed immediately. The NFT miner will be transferred to your account and start earning rewards."})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,disabled:d,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg font-semibold hover:bg-gray-600 disabled:opacity-50 transition-all",children:"Cancel"}),e.jsx("button",{onClick:n,disabled:d,className:"flex-1 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-semibold hover:shadow-lg hover:shadow-amber-500/50 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:20,className:"animate-spin"}),"Processing..."]}):"Confirm Purchase"})]})]})})}function be({miner:s,onClose:t,onSuccess:a}){const{user:l}=B(),[d,b]=c.useState(!1),[x,o]=c.useState(null),[p,y]=c.useState(!1),[n,i]=c.useState(""),[g,v]=c.useState("USDT"),N=async()=>{if(!l||!n){o("Please enter a price");return}const j=parseFloat(n);if(isNaN(j)||j<=0){o("Please enter a valid price");return}b(!0),o(null);try{const _=await de(s.id,l.id,n,g,"fixed_price");if(!_.success){o(_.error||"Failed to create listing");return}y(!0),setTimeout(()=>{a(),t()},2e3)}catch(_){o("Failed to create listing. Please try again."),console.error("Create listing error:",_)}finally{b(!1)}};return p?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-green-500/50 max-w-md w-full p-8 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Listed Successfully!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your miner is now available on the marketplace"}),e.jsx("button",{onClick:()=>{a(),t()},className:"px-6 py-3 bg-green-500 hover:bg-green-600 rounded-lg font-semibold transition-all",children:"View Marketplace"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 max-w-lg w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"List Miner for Sale"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:e.jsx(L,{size:24})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Miner"}),e.jsx("span",{className:"font-semibold",children:s.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Hashrate"}),e.jsxs("span",{className:"font-semibold",children:[s.hashrate_th," TH/s"]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Efficiency"}),e.jsxs("span",{className:"font-semibold",children:[s.efficiency_w_th," W/TH"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status"}),e.jsx("span",{className:"font-semibold capitalize",children:s.status})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sale Price"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",min:"0",value:n,onChange:j=>i(j.target.value),placeholder:"Enter price",className:"flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-amber-500"}),e.jsxs("select",{value:g,onChange:j=>v(j.target.value),className:"px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-amber-500",children:[e.jsx("option",{value:"USDT",children:"USDT"}),e.jsx("option",{value:"TYT",children:"TYT"}),e.jsx("option",{value:"BTC",children:"BTC"})]})]})]}),x&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(O,{size:20}),e.jsx("span",{children:x})]})}),e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Marketplace Fees:"}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Marketplace fee (2.5%)"}),e.jsxs("span",{children:[n?(parseFloat(n)*.025).toFixed(2):"0.00"," ",g]})]}),e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Foundation donation (1%)"}),e.jsxs("span",{children:[n?(parseFloat(n)*.01).toFixed(2):"0.00"," ",g]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-amber-400 pt-2 border-t border-gray-700",children:[e.jsx("span",{children:"You receive"}),e.jsxs("span",{children:[n?(parseFloat(n)*.965).toFixed(2):"0.00"," ",g]})]})]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/50 rounded-lg p-4",children:e.jsx("div",{className:"text-sm text-gray-300",children:"Once listed, your miner will be visible to all marketplace users. You can cancel the listing at any time."})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,disabled:d,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg font-semibold hover:bg-gray-600 disabled:opacity-50 transition-all",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:d||!n,className:"flex-1 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-semibold hover:shadow-lg hover:shadow-amber-500/50 disabled:opacity-50 transition-all flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:20,className:"animate-spin"}),"Creating..."]}):"List for Sale"})]})]})})}function Te(){const{user:s}=B(),[t,a]=c.useState([]),[l,d]=c.useState([]),[b,x]=c.useState(!0),[o,p]=c.useState("browse"),[y,n]=c.useState(null),[i,g]=c.useState(null),[v,N]=c.useState(null),[j,_]=c.useState("price_low"),[w,P]=c.useState("all"),[T,M]=c.useState("all"),[F,A]=c.useState("all"),[S,E]=c.useState(""),[ge,fe]=c.useState(""),[he,pe]=c.useState("USDT");c.useEffect(()=>{s&&k()},[s,o]);const k=async()=>{if(s){x(!0);try{if(o==="browse"){const{data:r,error:u}=await m.from("marketplace_listings").select(`
            *,
            nft_miners (*)
          `).eq("status","active").order("created_at",{ascending:!1});if(u)throw u;r&&a(r)}else{const{data:r}=await m.from("marketplace_listings").select(`
            *,
            nft_miners (*)
          `).eq("seller_id",s.id).order("created_at",{ascending:!1});r&&a(r);const{data:u}=await m.from("nft_miners").select("*").eq("owner_id",s.id).eq("is_listed_for_sale",!1).order("created_at",{ascending:!1});u&&d(u)}}catch(r){console.error("Error loading marketplace:",r)}finally{x(!1)}}},q=t.filter(r=>{if(w!=="all"&&r.list_price_asset!==w||T!=="all"&&r.nft_miners.rarity!==T||F!=="all"&&r.nft_miners.tier!==F)return!1;if(S){const u=S.toLowerCase();return r.id.toLowerCase().includes(u)||r.nft_miners.miner_model.toLowerCase().includes(u)}return!0}).sort((r,u)=>{switch(j){case"price_low":return parseFloat(r.list_price_amount)-parseFloat(u.list_price_amount);case"price_high":return parseFloat(u.list_price_amount)-parseFloat(r.list_price_amount);case"hashrate":return u.nft_miners.hashrate_th-r.nft_miners.hashrate_th;case"efficiency":return r.nft_miners.efficiency_w_per_th-u.nft_miners.efficiency_w_per_th;default:return 0}}),C=r=>{switch(r){case"legendary":return"text-yellow-400 bg-yellow-400/20 border-yellow-400/50";case"epic":return"text-purple-400 bg-purple-400/20 border-purple-400/50";case"rare":return"text-blue-400 bg-blue-400/20 border-blue-400/50";default:return"text-gray-400 bg-gray-400/20 border-gray-400/50"}},$=r=>{g(r),n("buy")},W=r=>{N(r),n("sell")},z=r=>{g(r),n("detail")},I=12500,K=t.length>0?t.reduce((r,u)=>r+parseFloat(u.list_price_amount),0)/t.length:0,Q=t.reduce((r,u)=>r+u.nft_miners.hashrate_th,0);return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-3 border-amber-400 border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"text-gray-400",children:"Loading marketplace..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"NFT Marketplace"}),e.jsx("p",{className:"text-gray-400",children:"Buy and sell Bitcoin mining NFTs"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>p("browse"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${o==="browse"?"bg-amber-500 text-black":"bg-gray-800 hover:bg-gray-700"}`,children:"Browse"}),e.jsx("button",{onClick:()=>p("my-listings"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${o==="my-listings"?"bg-amber-500 text-black":"bg-gray-800 hover:bg-gray-700"}`,children:"My Listings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Active Listings"}),e.jsx(Y,{className:"w-5 h-5 text-amber-400"})]}),e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:t.length}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Available now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Avg Price"}),e.jsx(G,{className:"w-5 h-5 text-amber-400"})]}),e.jsxs("div",{className:"text-3xl font-bold text-amber-400",children:["$",K.toFixed(0)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"USDT equiv."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Total Hashrate"}),e.jsx(U,{className:"w-5 h-5 text-amber-400"})]}),e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:Q.toFixed(0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"TH/s available"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"24h Volume"}),e.jsx(J,{className:"w-5 h-5 text-amber-400"})]}),e.jsxs("div",{className:"text-3xl font-bold text-amber-400",children:["$",(I/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-xs text-green-400 mt-2",children:"+15.3%"})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(X,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:S,onChange:r=>E(r.target.value),placeholder:"Search by ID or model...",className:"w-full pl-12 pr-4 py-3 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:border-amber-500 transition-colors"})]}),e.jsxs("select",{value:j,onChange:r=>_(r.target.value),className:"px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:border-amber-500 transition-colors",children:[e.jsx("option",{value:"price_low",children:"Price: Low to High"}),e.jsx("option",{value:"price_high",children:"Price: High to Low"}),e.jsx("option",{value:"hashrate",children:"Hashrate: High to Low"}),e.jsx("option",{value:"efficiency",children:"Efficiency: Best First"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:w,onChange:r=>P(r.target.value),className:"px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm focus:outline-none focus:border-amber-500",children:[e.jsx("option",{value:"all",children:"All Assets"}),e.jsx("option",{value:"TYT",children:"TYT"}),e.jsx("option",{value:"USDT",children:"USDT"}),e.jsx("option",{value:"BTC",children:"BTC"})]}),e.jsxs("select",{value:T,onChange:r=>M(r.target.value),className:"px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm focus:outline-none focus:border-amber-500",children:[e.jsx("option",{value:"all",children:"All Rarities"}),e.jsx("option",{value:"common",children:"Common"}),e.jsx("option",{value:"rare",children:"Rare"}),e.jsx("option",{value:"epic",children:"Epic"}),e.jsx("option",{value:"legendary",children:"Legendary"})]}),e.jsxs("select",{value:F,onChange:r=>A(r.target.value),className:"px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm focus:outline-none focus:border-amber-500",children:[e.jsx("option",{value:"all",children:"All Tiers"}),e.jsx("option",{value:"T1",children:"Tier 1"}),e.jsx("option",{value:"T2",children:"Tier 2"}),e.jsx("option",{value:"T3",children:"Tier 3"}),e.jsx("option",{value:"T4",children:"Tier 4"})]}),(S||w!=="all"||T!=="all"||F!=="all")&&e.jsx("button",{onClick:()=>{E(""),P("all"),M("all"),A("all")},className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg text-sm hover:bg-red-500/30 transition-all",children:"Clear Filters"})]})]})}),o==="my-listings"&&l.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-amber-400"}),"List Your Miners for Sale"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,3).map(r=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700 hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["#",r.id.slice(0,8)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${C(r.rarity)}`,children:r.rarity})]}),e.jsxs("div",{className:"text-sm mb-3",children:[e.jsxs("div",{className:"font-semibold",children:[r.hashrate_th," TH/s"]}),e.jsx("div",{className:"text-gray-400",children:r.miner_model})]}),e.jsx("button",{onClick:()=>W(r),className:"w-full px-3 py-2 bg-amber-500/20 text-amber-400 rounded-lg text-sm font-semibold hover:bg-amber-500/30 transition-all",children:"List for Sale"})]},r.id))}),l.length>3&&e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["+",l.length-3," more miners available"]})]}),q.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-12 border border-gray-700 text-center",children:[e.jsx(Y,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Listings Found"}),e.jsx("p",{className:"text-gray-400",children:S||w!=="all"||T!=="all"||F!=="all"?"Try adjusting your filters":o==="my-listings"?"You have no active listings":"No listings available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(r=>e.jsx("div",{className:"group bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl border border-gray-700 hover:border-amber-500/50 transition-all overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${C(r.nft_miners.rarity)}`,children:r.nft_miners.rarity}),e.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-semibold",children:r.nft_miners.tier})]}),e.jsx("button",{onClick:()=>z(r),className:"text-amber-400 hover:text-amber-300 transition-colors",children:e.jsx(ee,{size:18})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:r.nft_miners.miner_model}),e.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["#",r.nft_miners.id.slice(0,16),"..."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-xs mb-1",children:[e.jsx(D,{size:14}),"Hashrate"]}),e.jsx("div",{className:"text-lg font-bold text-amber-400",children:r.nft_miners.hashrate_th}),e.jsx("div",{className:"text-xs text-gray-500",children:"TH/s"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-xs mb-1",children:[e.jsx(H,{size:14}),"Efficiency"]}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:r.nft_miners.efficiency_w_per_th}),e.jsx("div",{className:"text-xs text-gray-500",children:"W/TH"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-lg p-4 mb-4 border border-amber-500/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300 mb-1",children:[e.jsx(ae,{size:14}),r.listing_type==="fixed_price"?"Fixed Price":"Auction"]}),e.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[parseFloat(r.list_price_amount).toLocaleString()," ",r.list_price_asset]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["â‰ˆ $",r.list_price_asset==="USDT"?parseFloat(r.list_price_amount).toFixed(2):r.list_price_asset==="BTC"?(parseFloat(r.list_price_amount)*95e3).toFixed(2):(parseFloat(r.list_price_amount)*.05).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(r),className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg font-semibold hover:bg-gray-600 transition-all",children:"Details"}),e.jsx("button",{onClick:()=>$(r),disabled:r.seller_id===s?.id,className:"flex-1 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-semibold hover:shadow-lg hover:shadow-amber-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none",children:r.seller_id===s?.id?"Your Listing":"Buy Now"})]})]})},r.id))}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-amber-400"}),"Marketplace Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Standard Fee"}),e.jsx("div",{className:"font-semibold text-lg",children:"2.5%"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Per transaction"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"VIP Discount"}),e.jsx("div",{className:"font-semibold text-lg text-amber-400",children:"Up to 50% off"}),e.jsx("div",{className:"text-xs text-gray-500",children:"For VIP members"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Payment Options"}),e.jsx("div",{className:"font-semibold text-lg",children:"TYT, USDT, BTC"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Multiple currencies"})]})]})]}),y==="buy"&&i&&e.jsx(ue,{listing:i,onClose:()=>n(null),onSuccess:k}),y==="sell"&&v&&e.jsx(be,{miner:v,onClose:()=>n(null),onSuccess:k}),y==="detail"&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 max-w-2xl w-full p-6 my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Miner Details"}),e.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white",children:e.jsx(L,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/20 flex items-center justify-center border border-amber-500/50",children:e.jsx(D,{className:"w-8 h-8 text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-xl mb-1",children:i.nft_miners.miner_model}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${C(i.nft_miners.rarity)}`,children:i.nft_miners.rarity}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700 rounded",children:i.nft_miners.tier})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(D,{size:16}),"Hashrate"]}),e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:i.nft_miners.hashrate_th}),e.jsx("div",{className:"text-sm text-gray-500",children:"TH/s"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(H,{size:16}),"Efficiency"]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:i.nft_miners.efficiency_w_per_th}),e.jsx("div",{className:"text-sm text-gray-500",children:"W/TH"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(U,{size:16}),"Daily Output"]}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(i.nft_miners.hashrate_th*156e-8).toFixed(6)}),e.jsx("div",{className:"text-sm text-gray-500",children:"BTC/day"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[e.jsx(te,{size:16}),"Created"]}),e.jsx("div",{className:"text-lg font-bold text-white",children:new Date(i.nft_miners.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"Mint date"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-lg p-6 border border-amber-500/50",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"Listing Price"}),e.jsxs("div",{className:"text-4xl font-bold text-amber-400 mb-2",children:[parseFloat(i.list_price_amount).toLocaleString()," ",i.list_price_asset]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["â‰ˆ $",i.list_price_asset==="USDT"?parseFloat(i.list_price_amount).toFixed(2):i.list_price_asset==="BTC"?(parseFloat(i.list_price_amount)*95e3).toFixed(2):(parseFloat(i.list_price_amount)*.05).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"NFT Token ID"}),e.jsx("div",{className:"font-mono text-xs text-gray-300 break-all",children:i.nft_miners.id})]}),i.seller_id!==s?.id&&e.jsx("button",{onClick:()=>{n("buy")},className:"w-full px-4 py-4 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg font-semibold text-lg hover:shadow-lg hover:shadow-amber-500/50 transition-all",children:"Buy Now"})]})]})})]})}export{Te as default};
